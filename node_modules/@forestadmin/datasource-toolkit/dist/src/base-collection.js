"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class BaseCollection {
    constructor(name, datasource) {
        this.dataSource = null;
        this.name = null;
        this.schema = null;
        this.dataSource = datasource;
        this.name = name;
        this.schema = {
            actions: {},
            countable: false,
            fields: {},
            searchable: false,
            segments: [],
        };
    }
    addAction(name, schema) {
        const action = this.schema.actions[name];
        if (action !== undefined)
            throw new Error(`Action "${name}" already defined in collection`);
        this.schema.actions[name] = schema;
    }
    addField(name, schema) {
        const fieldSchema = this.schema.fields[name];
        if (fieldSchema !== undefined)
            throw new Error(`Field "${name}" already defined in collection`);
        this.schema.fields[name] = schema;
    }
    addFields(fields) {
        Object.entries(fields).forEach(([fieldName, fieldSchema]) => this.addField(fieldName, fieldSchema));
    }
    addSegments(segments) {
        this.schema.segments.push(...segments);
    }
    enableCount() {
        this.schema.countable = true;
    }
    enableSearch() {
        this.schema.searchable = true;
    }
    async execute(caller, name) {
        throw new Error(this.schema.actions[name]
            ? `Action ${name} is not implemented.`
            : `No action named ${name} was added`);
    }
    async getForm() {
        return [];
    }
}
exports.default = BaseCollection;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1jb2xsZWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Jhc2UtY29sbGVjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQVVBLE1BQThCLGNBQWM7SUFLMUMsWUFBWSxJQUFZLEVBQUUsVUFBc0I7UUFKdkMsZUFBVSxHQUFlLElBQUksQ0FBQztRQUM5QixTQUFJLEdBQVcsSUFBSSxDQUFDO1FBQ3BCLFdBQU0sR0FBcUIsSUFBSSxDQUFDO1FBR3ZDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixPQUFPLEVBQUUsRUFBRTtZQUNYLFNBQVMsRUFBRSxLQUFLO1lBQ2hCLE1BQU0sRUFBRSxFQUFFO1lBQ1YsVUFBVSxFQUFFLEtBQUs7WUFDakIsUUFBUSxFQUFFLEVBQUU7U0FDYixDQUFDO0lBQ0osQ0FBQztJQUVTLFNBQVMsQ0FBQyxJQUFZLEVBQUUsTUFBb0I7UUFDcEQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFekMsSUFBSSxNQUFNLEtBQUssU0FBUztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsV0FBVyxJQUFJLGlDQUFpQyxDQUFDLENBQUM7UUFFNUYsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3JDLENBQUM7SUFFUyxRQUFRLENBQUMsSUFBWSxFQUFFLE1BQW1CO1FBQ2xELE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTdDLElBQUksV0FBVyxLQUFLLFNBQVM7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLFVBQVUsSUFBSSxpQ0FBaUMsQ0FBQyxDQUFDO1FBRWhHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQztJQUNwQyxDQUFDO0lBRVMsU0FBUyxDQUFDLE1BQTRDO1FBQzlELE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDLEVBQUUsRUFBRSxDQUMxRCxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FDdEMsQ0FBQztJQUNKLENBQUM7SUFFUyxXQUFXLENBQUMsUUFBa0I7UUFDdEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUM7SUFDekMsQ0FBQztJQUVTLFdBQVc7UUFDbkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO0lBQy9CLENBQUM7SUFFUyxZQUFZO1FBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztJQUNoQyxDQUFDO0lBcUJELEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBYyxFQUFFLElBQVk7UUFDeEMsTUFBTSxJQUFJLEtBQUssQ0FDYixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDdkIsQ0FBQyxDQUFDLFVBQVUsSUFBSSxzQkFBc0I7WUFDdEMsQ0FBQyxDQUFDLG1CQUFtQixJQUFJLFlBQVksQ0FDeEMsQ0FBQztJQUNKLENBQUM7SUFFRCxLQUFLLENBQUMsT0FBTztRQUNYLE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztDQUNGO0FBakZELGlDQWlGQyJ9